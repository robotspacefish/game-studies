pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
function _init()
  DIMENSION=128
  x=DIMENSION/2-4
  y=DIMENSION/2-4
  p_spr=11
  p_flip=false
  vx=0
  vy=0
  speed=2

end

function _update()
  -- reset (stop moving)
  vx=0
  vy=0

  --controls
  if (btn(⬅️)) then
    p_spr=32
    p_flip=true
    -- x -= speed
    vx = -1
    y+=align(y, 8)
  end
  if (btn(➡️)) then
    p_spr=32
    p_flip=false
    -- x += speed
    vx = 1
    y+=align(y, 8)
  end
  if (btn(⬆️)) then
    p_spr=13
    p_flip=false
    -- y-=speed
    vy =-1
    x+= align(x, 8)
  end
  if (btn(⬇️)) then
    p_spr=11
    p_flip=false
    -- y+=speed
    vy=1
    x+= align(x, 8)
  end

  -- move player
  x += vx * speed
  y += vy * speed


  --if run off screen warp to other side
  if (x>128) then x=-8 end
  if (x<-8) then x=128 end
  if (y<-8) then y=72 end
  if (y>72) then y=-8 end

end

function _draw()
  cls()
  palt(0, false)
  palt(15, true)
  map(0, 0, 0,0,16,16)
  spr(p_spr,x,y, 2,2, p_flip)

  --display info
  print("x="..x.." y="..y,0,80)
  -- print("vx="..vx.." vy="..vy,0,88)
end

function align(val, alignTo)
  local diff = val % alignTo
  local halfway = (alignTo - 1)/2

  if (diff > halfway) then
    return alignTo-diff
  else
    return -diff
  end

end

__gfx__
0000000000000000000000000000000011111110111111151111111511111111111111117777777577777770ffffff0000ffffffffffff0000ffffff00000000
000000000555555005555550055555001111111011111115111111151111117ccc111111666666d576666660fffff0c88c0ffffffffff0c88c0fffff00000000
0070070005c77c50055555500555c700111111101111111511111115111717777ccc1111666666d576666660ffff0cccccc0ffffffff0cccccc0ffff00000000
000770000559955005555550055559901111111011111115111111151117c777777cc1115555555555555550fff0cccccccc0ffffff0cccccccc0fff00000000
000770000555555005555550055555001111111011111115111111151177777777cccc117775777777757770fff0c688886c0ffffff0cc1ccccc0fff00000000
00700700057777500555555005557700111111101111111511111115117777c777ccc11166d5766666d57660fff0c666666c0ffffff0ccccccdc0fff00000000
000000005577775055577550555577001111111011111115111111151777c7777777cc1166d5766666d57660ff0dccccccccd0ffff0dcccccc1cd0ff00000000
0000000000900900009009000040900000000000555555555555555517777777777c7c115555555555555550ff0dc161616cd0ffff0dcccdccccd0ff00000000
000000000000000000000000000000000000000011111115111111151177777c777ccc117777757777777570f05dc616161cd50ff05dccdcccdcd50f00000000
00555000005550000000000000000000000000001111111511111115177777777cccc1116666d5766666d570f050cccccccc050ff050ccccc1cc050f00000000
005c700000c7500000000000000000000000000011111115111111151777777777c7c1116666d5766666d570f0c00cccccc00c0ff0c00cccccc00c0f00000000
00559900099550000000000000000000000000001111111511111115177c777cccccc1115555555555555550f0c0f055550f0c0ff0c0f055550f0c0f00000000
005550000055500000000000000000000000000011111115111111151177777ccccc11117577777775777770020200d22d002020020200d55d00202000000000
00577000007750000000000000000000000000001111111511111115111c7777cc7cccc1d5766666d5766660f0f0f0cccc0f0f0ff0f0f0cccc0f0f0f00000000
0557700000775500000000000000000000000000111111151111111511cccccccccccc11d5766666d5766660ffff0cccccc0ffffffff0cccccc0ffff00000000
0040900000904000000000000000000000000000555555555555555511111111111111110000000000000000fffff010010ffffffffff010010fffff00000000
ffffff0000ffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
fffff0cc880fffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ffff0cccccc0ffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
fff01ccccccc0fff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
fff0cccccc680fff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
fff0cccccc660fff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
fff0cccccccc0fff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
fff0cccdcc160fff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
fff0cccdcc610fff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
fff01cc5cccc0fff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ffff01c5ccc00fff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
fffff015110020ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
fffff015cccc0fff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
fffff011110020ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ffff0cccccc00fff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
fffff001100fffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000001010101000000000000000000000000010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0506050605060506050605060506050600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1516151615161516151615161516151600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0506050605060506050605060506050600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1516151615161516151615161516151600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0506050605060506050605060506050600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1516151615161516151615161516151600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0506050605060506050605060506050600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1516151615161516151615161516151600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0506050605060506050605060506050600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1516151615161516151615161516151600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
